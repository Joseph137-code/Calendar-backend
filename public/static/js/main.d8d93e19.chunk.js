(this.webpackJsonpcalendario=this.webpackJsonpcalendario||[]).push([[0],{131:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(7),c=n.n(r),o=(n(76),n(35)),s=n(9),i=n(8),u=n(17),l=n(27),d=n(11),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(u.a)(t,2),r=n[0],c=n[1],o=function(){c(e)},s=function(e){var t=e.target;c(Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},t.name,t.value)))};return[r,s,o]},b=n(12),f=n.n(b),m=n(18),p=n(13),v=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL,O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(v,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(v,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},x=n(21),g=n.n(x),y=n(22),C=n.n(y),N=C()(g.a),k=Object(p.b)("auth/login",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,r=t.lEmail,c=t.lPassword,e.prev=2,e.next=5,O("auth/login",{email:r,password:c},"POST");case 5:return o=e.sent,e.next=8,o.json();case 8:if(s=e.sent,201!==o.status){e.next=15;break}return localStorage.setItem("token",s.token),localStorage.setItem("token-init-date",(new Date).getTime()),e.abrupt("return",s);case 15:return N.fire({icon:"error",title:"Error!",text:s.msg}),e.abrupt("return",a(s.msg));case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(2),console.log("Error",e.t0.response.data),a(e.t0.response.data);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}()),E=Object(p.b)("auth/register",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c,o,s,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,r=t.rName,c=t.rEmail,o=t.rPassword,e.next=4,O("auth/register",{name:r,email:c,password:o},"POST");case 4:return s=e.sent,e.next=7,s.json();case 7:if(i=e.sent,201!==s.status){e.next=14;break}return localStorage.setItem("token",i.token),localStorage.setItem("token-init-date",(new Date).getTime()),e.abrupt("return",i);case 14:return N.fire({icon:"error",title:"Error!",text:i.msg}),e.abrupt("return",a(i.msg));case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(p.b)("auth/ValidationToken",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,h("auth/renew");case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),e.abrupt("return",c);case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",a(e.t0));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}()),w=(Object(p.b)("auth/ValidationToken",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.next=3,h("auth/renew");case 3:return r=e.sent,e.next=6,r.json();case 6:if(c=e.sent,200!==r.status){e.next=13;break}return localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),e.abrupt("return",c);case 13:return e.abrupt("return",a(c));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Object(p.c)({name:"autenticacion",initialState:{checking:!0,loading:!1,user:{},error:null},reducers:{authLogin:function(e,t){e.checking=!1},authCheckingFinish:function(e,t){e.checking=!1},authLogout:function(e,t){e.user={},localStorage.removeItem("token")}},extraReducers:function(e){e.addCase(k.pending,(function(e){"idle"===e.loading&&(e.loading="true")})).addCase(k.fulfilled,(function(e,t){e.loading=!1,e.checking=!1,e.user=t.payload})).addCase(k.rejected,(function(e,t){e.loading=!0,e.error=t.payload})).addCase(E.pending,(function(e){"idle"===e.loading&&(e.loading="true")})).addCase(E.fulfilled,(function(e,t){e.loading=!1,e.checking=!1,e.user=t.payload})).addCase(E.rejected,(function(e,t){e.loading=!0,e.error=t.payload})).addCase(S.pending,(function(e){"idle"===e.loading&&(e.loading="true")})).addCase(S.fulfilled,(function(e,t){e.loading=!1,e.checking=!1,e.user=t.payload})).addCase(S.rejected,(function(e,t){e.error=t.payload,e.checking=!0}))}})),T=w.actions,A=(T.authLogin,T.authCheckingFinish,T.authLogout),D=w.reducer,P=(n(94),n(2)),I=C()(g.a),L=function(){var e=Object(i.b)(),t=j({rName:"Sierra",rEmail:"sierra@sierra.com",rPassword:"1234567",rPassword1:"1234567"}),n=Object(u.a)(t,2),a=n[0],r=n[1],c=j({lEmail:"dann@dann.com",lPassword:"1234567"}),o=Object(u.a)(c,2),s=o[0],l=o[1],d=a.rName,b=a.rEmail,f=a.rPassword,m=a.rPassword1,p=s.lEmail,v=s.lPassword;return Object(P.jsx)("div",{className:"container login-container",children:Object(P.jsxs)("div",{className:"row",children:[Object(P.jsxs)("div",{className:"col-md-6 login-form-1",children:[Object(P.jsx)("h3",{children:"Ingreso"}),Object(P.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e(k(s))},children:[Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"text",className:"form-control",placeholder:"Correo",name:"lEmail",value:p,onChange:l})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"lPassword",value:v,onChange:l})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"submit",className:"btnSubmit",value:"Login"})})]})]}),Object(P.jsxs)("div",{className:"col-md-6 login-form-2",children:[Object(P.jsx)("h3",{children:"Registro"}),Object(P.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),f!==m)return I.fire({icon:"error",title:"Error!",text:"Las contrase\xf1as deben de ser iguales"});e(E(a))},children:[Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"text",className:"form-control",placeholder:"Nombre",name:"rName",value:d,onChange:r})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"email",className:"form-control",placeholder:"Correo",name:"rEmail",value:b,onChange:r})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"password",className:"form-control",placeholder:"Contrase\xf1a",name:"rPassword",value:f,onChange:r})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"password",className:"form-control",placeholder:"Repita la contrase\xf1a",name:"rPassword1",value:m,onChange:r})}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"submit",className:"btnSubmit",value:"Crear cuenta"})})]})]})]})})},V=n(51),R={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},_=function(e){var t=e.event;return Object(P.jsxs)("div",{children:[Object(P.jsxs)("strong",{children:[" ",t.title," "]}),Object(P.jsxs)("span",{children:["-",t.user.name," "]})]})},W=n(47),F=n.n(W),H=n(48),U=n.n(H),G=n(24),B=n.n(G),J=Object(p.c)({name:"counter",initialState:{value:0,modalOpen:!1},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload},modalOpening:function(e){e.modalOpen=!0},modalClose:function(e){e.modalOpen=!1}}}),M=J.actions,K=(M.increment,M.decrement,M.incrementByAmount,M.modalOpening),q=M.modalClose,z=J.reducer,Q=n(52),X=C()(g.a),Y={events:[],activeEvent:null,loading:!1,error:null},Z=Object(p.b)("event/new",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c,o,s,i,u;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=n.rejectWithValue,c=a().auth.user,o=c.uid,s=c.name,e.prev=2,e.next=5,h("events/",t,"POST");case 5:return i=e.sent,e.next=8,i.json();case 8:if(u=e.sent,console.log(u),!u.ok){e.next=14;break}return t.id=u.evento.id,t.user={_id:o,name:s},e.abrupt("return",t);case 14:e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(2),e.abrupt("return",r(e.t0));case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,n){return e.apply(this,arguments)}}()),$=Object(p.b)("event/get",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.prev=1,e.next=4,h("events");case 4:return r=e.sent,e.next=7,r.json();case 7:if(c=e.sent,200!==r.status){e.next=12;break}return e.abrupt("return",c.eventos);case 12:return e.abrupt("return",a(c));case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("Error",e.t0.response.data),a(e.t0.response.data);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()),ee=Object(p.b)("event/update",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.rejectWithValue,e.next=3,h("events/".concat(t.id),t,"PUT");case 3:return r=e.sent,e.next=6,r.json();case 6:if(c=e.sent,200!==r.status){e.next=11;break}return e.abrupt("return",t);case 11:return X.fire({icon:"error",title:"Error!",text:c.msg}),e.abrupt("return",a(c));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),te=Object(p.b)("event/Delete",function(){var e=Object(m.a)(f.a.mark((function e(t,n){var a,r,c,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=n.rejectWithValue,c=a().calendario.activeEvent.id,e.next=4,h("events/".concat(c),{},"DELETE");case 4:return o=e.sent,e.next=7,o.json();case 7:if(s=e.sent,200!==o.status){e.next=12;break}return e.abrupt("return",s);case 12:return X.fire({icon:"error",title:"Error!",text:s.msg}),e.abrupt("return",r(s));case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ne=Object(p.c)({name:"calendario",initialState:Y,reducers:{eventSetActive:function(e,t){e.activeEvent=t.payload},eventAddNew:function(e,t){e.events=[].concat(Object(Q.a)(e.events),[t.payload])},eventClearActiveEvent:function(e){e.activeEvent=null},eventUpdated:function(e,t){e.events=e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))},eventDeleted:function(e){e.events=e.events.filter((function(t){return t.id!==e.activeEvent.id})),e.activeEvent=null},eventLoaded:function(e,t){e.events=[t.payload]},eventLogout:function(){return Object(d.a)({},Y)}},extraReducers:function(e){e.addCase($.pending,(function(e,t){e.loading=!0})).addCase($.fulfilled,(function(e,t){e.events=t.payload})).addCase($.rejected,(function(e,t){e.loading=!1,e.error=t.payload})).addCase(ee.pending,(function(e,t){e.loading=!0})).addCase(ee.fulfilled,(function(e,t){e.events=e.events.map((function(e){return e.id===t.payload.id?t.payload:e}))})).addCase(ee.rejected,(function(e,t){e.loading=!1,e.error=t.payload})).addCase(Z.pending,(function(e,t){e.loading=!0})).addCase(Z.fulfilled,(function(e,t){e.loading=!1,e.events=[].concat(Object(Q.a)(e.events),[t.payload])})).addCase(Z.rejected,(function(e,t){e.loading=!1,e.error=t.payload})).addCase(te.pending,(function(e,t){e.loading=!0})).addCase(te.fulfilled,(function(e,t){e.loading=!1,e.events=e.events.filter((function(t){return t.id!==e.activeEvent.id})),e.activeEvent=null})).addCase(te.rejected,(function(e,t){e.loading=!1,e.error=t.payload}))}}),ae=ne.actions,re=ae.eventSetActive,ce=(ae.eventAddNew,ae.eventClearActiveEvent),oe=(ae.eventUpdated,ae.eventDeleted,ae.eventLoaded,ae.eventLogout),se=ne.reducer,ie=C()(g.a),ue={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};F.a.setAppElement("#root");var le=B()().minutes(0).seconds(0).add(1,"hours"),de=le.clone().add(1,"hours"),je={title:"",notes:"",start:le.toDate(),end:de.toDate()},be=function(){var e=Object(i.c)((function(e){return e.counter.modalOpen})),t=Object(i.c)((function(e){return e.calendario})).activeEvent,n=Object(i.b)(),r=Object(a.useState)(le.toDate()),c=Object(u.a)(r,2),o=c[0],s=c[1],j=Object(a.useState)(de.toDate()),b=Object(u.a)(j,2),f=b[0],m=b[1],p=Object(a.useState)(!0),v=Object(u.a)(p,2),O=v[0],h=v[1],x=Object(a.useState)(je),g=Object(u.a)(x,2),y=g[0],C=g[1],N=y.title,k=y.notes,E=y.start,S=y.end;Object(a.useEffect)((function(){C(t||je)}),[t,C]);var w=function(e){var t=e.target;C(Object(d.a)(Object(d.a)({},y),{},Object(l.a)({},t.name,t.value)))};function T(){n(q()),n(ce()),C(je)}return Object(P.jsx)("div",{children:Object(P.jsxs)(F.a,{isOpen:e,onAfterOpen:function(){},onRequestClose:T,style:ue,closeTimeoutMS:200,contentLabel:"Example Modal",className:"modal",overlayClassName:"modal-fondo",children:[Object(P.jsxs)("h1",{children:[t?"Edita el Evento":"Nuevo Evento"," "]}),Object(P.jsx)("hr",{}),Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault();var a=B()(E),r=B()(S);return a.isSameOrAfter(r)?ie.fire({icon:"error",title:"Oops...",text:"Error!",footer:"La fecha fin debe de ser mayor a la fecha de inicio"}):N.trim().length<2?h(!1):(n(t?ee(y):Z(y)),h(!0),void T())},className:"container",children:[Object(P.jsxs)("div",{className:"form-group",children:[Object(P.jsx)("label",{children:"Fecha y hora inicio"}),Object(P.jsx)(U.a,{onChange:function(e){s(e),C(Object(d.a)(Object(d.a)({},y),{},{start:e}))},value:o,className:"form-control"})]}),Object(P.jsxs)("div",{className:"form-group",children:[Object(P.jsx)("label",{children:"Fecha y hora fin"}),Object(P.jsx)(U.a,{onChange:function(e){m(e),C(Object(d.a)(Object(d.a)({},y),{},{end:e}))},value:f,minDate:o,className:"form-control"})]}),Object(P.jsx)("hr",{}),Object(P.jsxs)("div",{className:"form-group",children:[Object(P.jsx)("label",{children:"Titulo y notas"}),Object(P.jsx)("input",{type:"text",className:"form-control ".concat(!O&&"is-invalid"," "),placeholder:"T\xedtulo del evento",name:"title",value:N,onChange:w,autoComplete:"off"}),Object(P.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Una descripci\xf3n corta"})]}),Object(P.jsxs)("div",{className:"form-group",children:[Object(P.jsx)("textarea",{type:"text",className:"form-control",placeholder:"Notas",rows:"5",name:"notes",value:k,onChange:w}),Object(P.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Informaci\xf3n adicional"})]}),Object(P.jsxs)("button",{type:"submit",className:"btn btn-outline-primary btn-block",children:[Object(P.jsx)("i",{className:"far fa-save"}),Object(P.jsx)("span",{children:" Guardar"})]})]})]})})},fe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})).user.name;return Object(P.jsxs)("div",{className:"navbar navbar-dark bg-secondary mb-4",children:[Object(P.jsx)("span",{className:"navbar-brand",children:Object(P.jsx)("h3",{children:t})}),Object(P.jsxs)("button",{className:"btn btn-outline-danger",onClick:function(){e(A()),e(oe())},children:[Object(P.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(P.jsx)("span",{children:" Salir"})]})]})},me=(n(125),n(126),function(){var e=Object(i.b)();return Object(P.jsx)("button",{className:"btn btn-primary fab",onClick:function(){e(K())},children:Object(P.jsx)("i",{className:"fas fa-plus"})})}),pe=function(){var e=Object(i.b)();return Object(P.jsxs)("button",{className:"btn btn-danger fab-danger",onClick:function(){e(te())},children:[Object(P.jsx)("i",{className:"fas fa-trash"}),Object(P.jsx)("span",{children:" Borrar evento "})]})};B.a.locale("es");var ve=Object(V.b)(B.a),Oe=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.calendario.events})),n=Object(i.c)((function(e){return e.calendario})).activeEvent,r=Object(i.c)((function(e){return e.auth.user})).uid,c=Object(a.useState)(localStorage.getItem("lastView")||"month"),o=Object(u.a)(c,2),s=o[0],l=o[1];Object(a.useEffect)((function(){e($())}),[e]);return Object(P.jsxs)("div",{className:"calendar-screen",children:[Object(P.jsx)(fe,{}),Object(P.jsx)(V.a,{localizer:ve,events:t,startAccessor:"start",endAccessor:"end",onDoubleClickEvent:function(t){e(K())},onSelectEvent:function(t){e(re(t))},onView:function(e){l(e),localStorage.setItem("lastView",e)},onSelectSlot:function(t){e(ce())},selectable:!0,messages:R,view:s,eventPropGetter:function(e,t,n,a){return{style:{backgroundColor:r===e.user._id?"#e61c5f":"#367CF7",borderRadius:"0px",display:"block",color:"#333132"}}},components:{event:_}}),Object(P.jsx)(me,{}),n&&Object(P.jsx)(pe,{}),Object(P.jsx)(be,{})]})},he=n(38),xe=["isAuthenticated","component"],ge=function(e){var t=e.isAuthenticated,n=e.component,a=Object(he.a)(e,xe);return Object(P.jsx)(s.b,Object(d.a)(Object(d.a)({},a),{},{component:function(e){return t?Object(P.jsx)(s.a,{to:"/"}):Object(P.jsx)(n,Object(d.a)({},e))}}))},ye=["isAuthenticated","component"],Ce=function(e){var t=e.isAuthenticated,n=e.component,a=Object(he.a)(e,ye);return Object(P.jsx)(s.b,Object(d.a)(Object(d.a)({},a),{},{component:function(e){return t?Object(P.jsx)(n,Object(d.a)({},e)):Object(P.jsx)(s.a,{to:"/Login"})}}))},Ne=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})).user.uid;return Object(a.useEffect)((function(){e(S())}),[e]),Object(P.jsx)(o.a,{children:Object(P.jsx)("div",{children:Object(P.jsxs)(s.d,{children:[Object(P.jsx)(ge,{exact:!0,path:"/Login",component:L,isAuthenticated:!!t}),Object(P.jsx)(Ce,{exact:!0,path:"/",component:Oe,isAuthenticated:!!t}),Object(P.jsx)(s.a,{to:"/"})]})})})},ke=function(){return Object(P.jsx)("div",{children:Object(P.jsx)(Ne,{})})},Ee=Object(p.a)({reducer:{counter:z,calendario:se,auth:D}});c.a.render(Object(P.jsx)(i.a,{store:Ee,children:Object(P.jsx)(ke,{})}),document.getElementById("root"))},76:function(e,t,n){},94:function(e,t,n){}},[[131,1,2]]]);
//# sourceMappingURL=main.d8d93e19.chunk.js.map